<?xml version="1.0"?>

<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:noNamespaceSchemaLocation="https://community.rti.com/schema/7.5.0/rti_recording_service.xsd">


    <types>
      <include file="../dds/build/xml_gen/ExampleTypes.xml"/>
    </types>

    <recording_service name="xcdr">

    <!-- <administration>
            <distributed_logger>
                <enabled>false</enabled>
            </distributed_logger>
            <enabled>false</enabled>
        </administration>

        <monitoring>
          <enabled>false</enabled>
            <status_publication_period>
                <sec>1</sec>
                <nanosec>0</nanosec>
            </status_publication_period>
            <statistics_sampling_period>
                <sec>0</sec>
                <nanosec>500000000</nanosec>
            </statistics_sampling_period>
        </monitoring> -->

    <!-- Storage settings -->
        <storage>
            <sqlite>
                <storage_format>XCDR_AUTO</storage_format>
                <fileset>
                    <workspace_dir>log_dir</workspace_dir>
                    <execution_dir_expression>xcdr</execution_dir_expression>
                    <filename_expression>data_%auto:0-9%.dat</filename_expression>
                <rollover>
                     <enabled>true</enabled>
                     <file_size_limit unit="MEGABYTES">2</file_size_limit>
                     <time_limit>
                         <hours>0</hours>
                         <minutes>30</minutes>
                     </time_limit>
                </rollover>
                </fileset>
            </sqlite>
        </storage>


        <domain_participant name="RecordingServiceParticipant">
            <domain_id>1</domain_id>

            <!-- Need to Register the Types here first before they can be used -->
            <register_type name="example_types::Button" type_ref="example_types::Button"></register_type>
        </domain_participant>

         <!-- 
          Record a specific Topic using a Type from a datamodel that has been 
          included with an XML file.
          Example: Most open source DDS variants will not publish Type Objects by default.
          -->
        <session name="RegisteredTypeOnly">
          <topic name="Button" participant_ref="RecordingServiceParticipant">
            <topic_name>Button</topic_name>
            <registered_type_name>example_types::Button</registered_type_name>

          <!-- Optionally specify DataReader QoS here -->
          <!-- <datareader_qos></datareader_qos> -->
          </topic>
        </session>        
    </recording_service>
</dds>
